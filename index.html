<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>

<!--
Bulma removes header sizes
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css"/>
Milligram messes up alignment
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.min.css"/>
Pure CSS is perfect, we included it in ./stylesheets/all.yml
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous"/>
<!-- -->

</head>
<body>

<div id="loading" style="width:100%;height:100%;margin:40%;">Loading . . .</div>
<div id="main-page" style="display:none;"></div>

<script type='module'>
  /*
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelector('#loading').style.display = "none"
    document.querySelector('#main-page').style.display = "block"
  })*/

    import { render } from './main.mjs'
    window.dataurl = (new URLSearchParams(window.location.search)).get('dataurl')
    if (! window.dataurl) {
      window.dataurl = 'https://raw.githubusercontent.com/svlentink/lp-config-example/main/dashboard.yml'
      let nextURL = window.location.href.split('#')[0]
      if (window.location.search)
        nextURL += '&dataurl=' + window.dataurl
      else
        nextURL += '?dataurl=' + window.dataurl
      let nextTitle = document.querySelector('title').innerText
      window.history.replaceState('', nextTitle, nextURL)
    }
    render(document.querySelector('#main-page'),window.dataurl)
    document.querySelector('#loading').style.display = "none"
    document.querySelector('#main-page').style.display = "block"
</script>
</body>
</html>
