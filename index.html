<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>

<!--
Bulma removes header sizes
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css"/>
Milligram messes up alignment
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.min.css"/>
Pure CSS is perfect, we included it in ./stylesheets/all.yml
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous"/>
<!-- -->

<link rel="modulepreload" href='https://cdn.lent.ink/js/npm/yamljs.js' />
<link rel="modulepreload" href='./mods/abstractelem.mjs' />

<link rel="modulepreload" href='https://cdn.lent.ink/js/npm/marked.js' />
<link rel="modulepreload" href='./mods/markdown.mjs' />

<link rel="modulepreload" href='./mods/renderlists.mjs' />
<link rel="modulepreload" href='./mods/nestedlist.mjs' />

<link rel="modulepreload" href='https://cdn.lent.ink/js/npm/chart.js.js' />
<link rel="modulepreload" href='./mods/graph.mjs' />
<link rel="modulepreload" href='./mods/csv.mjs' />
<link rel="modulepreload" href='./mods/csv-graph.mjs' />

<link rel="modulepreload" href='./mods/routines.mjs' />
<link rel="modulepreload" href='https://cdn.lent.ink/js/npm/fullcalendar.js' />
<link rel="modulepreload" href='./mods/calendar.mjs' />

<link rel="modulepreload" href='./mods/route.mjs' />

<link rel="modulepreload" href='./mods/personas.mjs' />

<link rel="modulepreload" href='./mods/plannedacts.mjs' />

<link rel="modulepreload" href='./mods/tmm.mjs' />

</head>
<body>

<div id="loading" style="width:100%;height:100%;margin:40%;">Loading . . .</div>
<div id="main-page" style="display:none;"></div>

<script type='module'>
  /*
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelector('#loading').style.display = "none"
    document.querySelector('#main-page').style.display = "block"
  })*/

    import { render } from './main.lazy.mjs'
    window.dataURL = (new URLSearchParams(window.location.search)).get('dataurl')
    if (! window.dataURL) {
      window.dataURL = 'https://raw.githubusercontent.com/svlentink/lp-config-example/main/dashboard.yml'
      let nextURL = window.location.href.split('#')[0]
      if (window.location.search)
        nextURL += '&dataurl=' + window.dataURL
      else
        nextURL += '?dataurl=' + window.dataURL
      let nextTitle = document.querySelector('title').innerText
      window.history.replaceState('', nextTitle, nextURL)
    }
    render(document.querySelector('#main-page'), window.dataURL)
    document.querySelector('#loading').style.display = "none"
    document.querySelector('#main-page').style.display = "block"
</script>
</body>
</html>
