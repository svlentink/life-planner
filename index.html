<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>


<!-- FIXME remove the following
<script>var exports = {};</script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
-->

</head>
<body>

<div id="loading" style="width:100%;height:100%;margin:40%;">Loading . . .</div>
<div id="main-page" style="display:none;"></div>

<script type='module'>
  /*
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelector('#loading').style.display = "none"
    document.querySelector('#main-page').style.display = "block"
  })*/

    import { render } from './main.js'
    window.dataurl = (new URLSearchParams(window.location.search)).get('dataurl')
    if (! window.dataurl) {
      window.dataurl = 'https://raw.githubusercontent.com/svlentink/life-planner/master/example/dashboard.yml'
      let nextURL = window.location.href.split('#')[0]
      if (window.location.search)
        nextURL += '&dataurl=' + window.dataurl
      else
        nextURL += '?dataurl=' + window.dataurl
      let nextTitle = document.querySelector('title').innerText
      window.history.replaceState('', nextTitle, nextURL)
    }
    render(document.querySelector('#main-page'),window.dataurl)
    document.querySelector('#loading').style.display = "none"
    document.querySelector('#main-page').style.display = "block"
</script>
</body>
</html>
